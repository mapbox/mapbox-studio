

<section class='small pad2 contain keyline-bottom'>
  <h3 class='space-bottom1'>Keyboard shortcuts</h3>
  <ul class='space-bottom1'>
    <li><kbd class='code prefixed'>s</kbd> Save.</li>
    <li><kbd class='code prefixed'>.</kbd> View map.</li>
    <li><kbd class='code prefixed'>\</kbd> View settings.</li>
    <li><kbd class='code prefixed'>h</kbd> View help.</li>
    <li><kbd class='code prefixed'>b</kbd> View bookmarks.</li>
    <li><kbd class='code prefixed'>i</kbd> View data.</li>
    <li><kbd class='code prefixed'>alt</kbd>+<kbd>[1-9]</kbd> Switch active stylesheet.</li>
    <li><kbd class='code prefixed'>f</kbd> Search current stylesheet.</li>
  </ul>
  <p>Override shortcuts by holding <kbd>Shift</kbd>.</p>
</section>
<section class='pad2 keyline-bottom prose'>

<h3 class='space-bottom1'>Selectors</h3>

<p>TileMill 2 relies on the <a target='_blank' href="https://github.com/mapbox/carto">CartoCSS</a> styling language. It should be familiar to CSS users and easy to pick up for everyone else. Here's a simple CartoCSS style:</p>

<pre class='carto-snippet'>
// Select the layer
// with ID "water"
#water {
  // Make all polygons blue.
  polygon-fill: blue;
  // Add a green border.
  line-color: green;
}
</pre>

<p>The first step to styling a map is to instruct the map <em>what</em> piece of your data to style by declaring a selector:</p>
<p> Select the 'water' layer:</p>
<pre class='carto-snippet'>
#water {...}
</pre>
<p> In layer '#country_label', select features with class 'name', and in that class select countries with the value 'United States':</p>
<pre class='carto-snippet'>
#country_label[name='United States'] {...}
</pre>
<p> Use the wildcard selector to select all layers:</p>
<pre class='carto-snippet'>
* {...}
</pre>

<p>The order of selectors does not matter as there is no hierarchical structure in maps. Separating selector parts with spaces is optional. The following selectors are thus equivalent:</p>

<pre class='carto-snippet'>
#world [NAME='USA'] .red [zoom &gt; 10] {...}

[zoom &gt; 10].red#world[NAME='USA'] {...}

[NAME='USA'] [zoom &gt; 10] #world.red {...}</pre>
</section>
<section class='pad2 keyline-bottom prose'>
  <h3 class='space-bottom1'>Nested styles</h3>
  <p>TileMill 2 allows you to arbitarily nest styles. All elements are added to create a combining selector. The order of elements in a selector is not of importance:</p>
<pre class='carto-snippet'>
// Applies to all layers
// with 'name' class
.name {
  text-name: ['name'];
  text-face-name: 'Lato Light';
  // Applies to class 'name'
  // in layer #country_names
  #counry_names { font-size: 15px; }
}</pre>
  <p>This can be a convenient way to group style changes by zoom level:</p>
<pre class='carto-snippet'>
// Select both landuse and water
// layers at zoom &gt; 1
[zoom &gt; 1] {
  // polygon-gamma applies
  // to both landuse and water
  polygon-gamma: 0.3;
  #landuse { polygon-fill: #323; }
  #water { polygon-fill: #144; }
}</pre>
</section>
<section class='pad2 keyline-bottom prose'>
  <h3 class='space-bottom1'>Attachments</h3>
  <p>By default, if you set a style rule, it overrides any previous style rules. However, sometimes you want to add multiple instances of a style, like in the case of a road border, country outline or for glow effects.</p>
<pre class='carto-snippet'>
#world {
  ::outline {
    line-color: #000;
    line-width: 6;
  }
  line-color: #fff;
  line-width: 3;
}</pre>
  <p>This style first renders a black line with width <code>6</code>, and on top of that, an additional white line with width <code>3</code>. You can use an arbitrary amount of attachments to draw the same feature multiple times. The order in which you define attachments matters, the earlier it is defined, the lower it is drawn. This means that you should define shadows first before defining the actual feature symbolizer.</p>
  <p>When nesting attachments, they are concatenated together with a <code>/</code>:</p>
<pre class='carto-snippet'>
::outline {
  ::shadow {
  // creates a symbolizer named "outline/shadow"
  }
}</pre>
</section>
<section class='pad2 keyline-bottom prose'>
  <h3 class='space-bottom1'>Values</h3>
  <p>Different properties in carto accept different types of values - colors, dimensions, and more.</p>
  <h4>Colors</h4>
  <p>Carto accepts a variety of syntaxes for colors - HTML-style hex values,
  rgb, rgba, and hsl. It also supports the predefined HTML colors names, like
  <code>yellow</code> and <code>blue</code>.</p>
<pre class='carto-snippet'>
#line {
  line-color: #ff0;
  line-color: #ffff00;
  line-color: rgb(255, 255, 0);
  line-color: rgba(255, 255, 0, 1);
  line-color: hsl(100, 50%, 50%);
  line-color: yellow;
}</pre>
  <h4>Dimensions</h4>
  <p>Dimensions in carto are always pixels; no <code>px</code> suffix is needed. Pixel dimensions are noted in the reference as <code>float</code> values.</p>
<pre class='carto-snippet'>
line-width: 5;</pre>
  <h4>Keywords</h4>
  <p>Some properties accept keyword arguments, which should be entered literally</p>
<pre class='carto-snippet'>
raster-mode: normal;</pre>
</section>
<section class='pad2 keyline-bottom prose'>
  <h3 class='space-bottom1'>Variables</h3>
  <p>You can define variables in stylesheets by prefixing an alphanumeric name with <code>@</code>.</p>
<pre class='carto-snippet'>
@green: #2B4D2D;
Map { background-color: @green; }
#world { polygon-fill: @green; }</pre>
</section>
<section class='pad2 keyline-bottom prose'>
  <h3 class='space-bottom1'>Operations</h3>
  <p>Any number, color or variable can be operated on using mathematical expressions.</p>
<pre class='carto-snippet'>
@gray: #888;

#world {
  polygon-fill: @gray + #111;
  line-width: 2 * 2;
  line-color: @gray / 2;
}</pre>
</section>
<section class='pad2 keyline-bottom prose'>
  <h3 class='space-bottom1'>Color functions</h3>
  <p>Carto inherits color manipulation functions from <a target='_blank' href='http://lesscss.org' target='_blank'>less.js</a>.</p>
<pre class='carto-snippet'>
// lighten or darken a color
lighten(@color, 10%);
darken(@color, 10%);

// de/saturate a color
saturate(@color, 10%);
desaturate(@color, 10%);

// adjust opacity of a color
fadein(@color, 10%);
fadeout(@color, 10%);

// set opacity of a color
fade(@color, 10%);

// adjust the hue of a color
// (e.g. on a color wheel)
spin(@color, 10);
spin(@color, -10);

// mix @color1 into @color2
mix(@color1,@color2, 10%);

// desaturate by 10%
greyscale(@color1, 10%);
</pre>
</section>
